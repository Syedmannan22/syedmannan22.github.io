<!DOCTYPE html>
<html lang="en">
<head>
  <title>Syed Abdul Mannan - Portfolio</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap-theme.min.css">
  
  <!-- jQuery & Moment.js -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

  <style>
    body { padding-top: 20px; }
    .section-title { margin-top: 40px; }
    #email { color: blue; cursor: pointer; }
  </style>
</head>
<body>

  <div class="container">
    <div class="jumbotron text-center">
      <h1>Syed Abdul Mannan</h1>
      <p>Web Developer | Portfolio</p>
    </div>

    <div id="welcomeMsg" class="alert alert-info text-center"></div>

    <div class="row">
      <div class="col-md-6">
        <h3>About Me</h3>
        <p>I am a Computer Science graduate focused on building responsive websites using HTML, CSS, JavaScript, and APIs.</p>
      </div>
      <div class="col-md-6">
        <h3>Skills</h3>
        <ul>
          <li>HTML, CSS, Bootstrap</li>
          <li>JavaScript, jQuery, ReactJS</li>
          <li>MySQL, Git, PHP</li>
        </ul>
      </div>
    </div>

    <div class="section-title">
      <h3>Interactive Features</h3>
      <p>‚è∞ Current Time: <span id="clock"></span></p>
      <p>üìÖ Today's Date: <span id="today"></span></p>
      <p id="email" onclick="showhideEmail()">üìß Show Email</p>
    </div>

    <div class="section-title">
      <h3>üòÇ Joke of the Minute</h3>
      <p id="jokeText">Loading joke...</p>
    </div>

    <div class="section-title">
      <h3>üé® XKCD Comic</h3>
      <p id="comicTitle"></p>
      <img id="comicImg" class="img-responsive" alt="XKCD Comic">
    </div>

    <div class="text-center section-title">
      <p>GitHub: <a href="https://github.com/syedmannan22" target="_blank">syedmannan22</a></p>
      <p>Email: syeda45@udayton.edu</p>
    </div>
  </div>

  <!-- JavaScript Logic -->
  <script>
    // Digital Clock
    function updateClock() {
      const now = new Date();
      document.getElementById("clock").innerText = now.toLocaleTimeString();
    }
    setInterval(updateClock, 1000);

    // Show/Hide Email
    var shown = false;
    function showhideEmail() {
      if (shown) {
        document.getElementById('email').innerHTML = "üìß Show Email";
        shown = false;
      } else {
        document.getElementById('email').innerHTML = "<a href='mailto:syeda45@udayton.edu'>syeda45@udayton.edu</a>";
        shown = true;
      }
    }

    // Display Current Date
    $(document).ready(function () {
      $('#today').text(moment().format('MMMM Do YYYY'));
    });

    // JokeAPI Integration
    function fetchJoke() {
      fetch("https://v2.jokeapi.dev/joke/Any")
        .then(res => res.json())
        .then(data => {
          let joke = data.type === "single" ? data.joke : `${data.setup} - ${data.delivery}`;
          $('#jokeText').text(joke);
        });
    }
    fetchJoke();
    setInterval(fetchJoke, 60000); // every 1 minute

    // XKCD Comic API Integration
    fetch("https://xkcd.com/info.0.json")
      .then(res => res.json())
      .then(data => {
        $('#comicTitle').text(data.title);
        $('#comicImg').attr("src", data.img);
      });

    // Cookie: Welcome or Welcome Back
    const welcomeDiv = document.getElementById("welcomeMsg");
    const lastVisit = getCookie("lastVisit");
    const now = new Date().toString();
    if (!lastVisit) {
      welcomeDiv.innerText = "Welcome to my homepage!";
    } else {
      welcomeDiv.innerText = "Welcome back! Your last visit was " + lastVisit;
    }
    document.cookie = "lastVisit=" + now;

    // Cookie Helper
    function getCookie(name) {
      let cookies = document.cookie.split(';');
      for (let i = 0; i < cookies.length; i++) {
        let c = cookies[i].trim();
        if (c.indexOf(name + "=") === 0) return c.substring(name.length + 1);
      }
      return "";
    }
  </script>

</body>
</html>
